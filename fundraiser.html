<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Bare - Start Bootstrap Template</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">Clubs</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="fundraiser.html">Fundraising
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="checkrequest.html">Request a Check</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="meetings.html">Meeting Tracker</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Content -->

    <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h1 class="mt-5">Guidelines for Student Organization Fundraising</h1>
            <p class="lead">Please read and agree to the guidelines</p>
          </div>  
            <ol class="guidelines">
              <li>All students wanting to fundraise must obtain approval from both their advisor and Director of Student Activities. This approval process is accomplished through the submission of the Fundraising rRequest Form two weeks prior to the date of the proposed fundraiser.</li>
              <li>The student organization must have a collection box or bank bag on-site to store the money. If you do not have one, Student Activities will provide one for you.</li>
              <li>At the location of the fundraiser, the registered organization must post visible information regarding the details of the fundraiser.</li>
              <li>Money raised and/or collected must be deposited with the Student Activities Department within 48 hours of the completion of the fundraiser. Money may also be deposited in SAtudent Activites throughout the duration of the fundraiser for safe keeping.</li>
              <li>It is suggested that organizations keep a two person system with the money. Two people should sign off on the mony collected.</li>
              <li>All checks must be written out to PTC.</li>
              <li>An individual or individual of the student organization may not participate for financial gain.</li>
              <li>Door-to-door sales/solicitation to the academics/administration is strongly prohibited. Upon request, Student Activites will provide a table on Level 4 for no longer than 2 weeks for the fundraiser or 1 continuous week for a raffle.</li>
            </ol>
        </div>
    </div>
    
    <div class="container">
        <form id="fundraiser">
            <br>
            <h1 class="text-center">Fundraiser Request Form</h1>
            <br>

            <div class="form-row">
                <div class="form-group col-lg-12">
                    <label for="organization">Name of Organization</label>
                    <input type="text" class="form-control" id="organization">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="organization">Name</label>
                    <input type="text" class="form-control" pattern="^[A-Za-z]+$" id="name">
                </div>
                <div class="form-group col-md-6">
                    <label for="organization">Email</label>
                    <input type="email" class="form-control" id="email" placeholder="emailname@example.com">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="organization">Start Date</label>
                    <input type="date" class="form-control" id="start">
                </div>
                <div class="form-group col-md-6">
                    <label for="organization">End Date</label>
                    <input type="date" class="form-control" id="end">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-lg-12">
                    <label for="description">Describe the Fundraiser</label>
                    <textarea class="form-control" id="description" rows="3"></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-lg-12">
                    <label for="location">Location of the Fundraiser</label>
                    <input type="text" class="form-control" id="location"></input>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="cost">Up Front Cost</label>
                    <input type="text" class="form-control" id="cost" pattern="^\$?[0-9]+(.[0-9][0-9])?$"
                        placeholder="$##.##"></input>
                </div>
                <div class="form-group col-md-6">
                    <label for="description">Usage of Funds</label>
                    <textarea class="form-control" id="usage" rows="3"></textarea>
                </div>
            </div>
            <fieldset>
                <div class="col-lg-12 text-center">
                  <label for="agree"><input type="checkbox" name="choice" id="agree" value="agree"> I agree to the Guidelines for Student Organization Fundraising</label>
                </div>
            </fieldset>

            <div class="text-center" id="output"></div>
            <button type="submit" class="form-control btn btn-primary">Email</button>
        </form>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.slim.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        const FORM = document.getElementById("fundraiser"),
            ORGANIZATION = document.getElementById("organization"),
            NAME = document.getElementById("name"),
            EMAIL = document.getElementById("email"),
            START = document.getElementById("start"),
            END = document.getElementById("end"),
            DESCRIPTION = document.getElementById("description"),
            LOCATION = document.getElementById("location"),
            COST = document.getElementById("cost"),
            USAGE = document.getElementById("usage"),
            OUTPUT = document.getElementById("output");
        var output = null;

        listener(FORM, "onsubmit", "submit", event => {
            event.preventDefault();

            let organization = ORGANIZATION.value.toString(),
                name = NAME.value.toString(),
                email = EMAIL.value.toString(),
                start = START.value.toString(),
                end = END.value.toString(),
                description = DESCRIPTION.value.toString(),
                location = LOCATION.value.toString(),
                cost = COST.value.toString(),
                usage = USAGE.value.toString();

            if (organization.length == 0 || name.length == 0 || start.length == 0 || end.length == 0 || description.length == 0 || location.length == 0 || cost.length == 0 || usage.length == 0) {
                setOutput("Please complete the entire form before emailing.", false);

                return;
            }

            let startSplit = start.split("-"),
                endSplit = end.split("-");

            try {
                let startYear = parseInt(startSplit[0]),
                    startMonth = parseInt(startSplit[1]),
                    startDay = parseInt(startSplit[2]),

                    endYear = parseInt(endSplit[0]),
                    endMonth = parseInt(endSplit[1]),
                    endDay = parseInt(endSplit[2]);

                if (endYear - startYear < 0 || endMonth - startMonth < 0 || endDay - startDay < 0) {
                    setOutput("The end date must occur after the start date.");

                    return;
                }
            } catch (message) {
                setOutput("The dates specified are invalid.", false);

                return;
            }

            setOutput("Email is being sent.", true);
            //send email
        });

        function setOutput(outputText, successful) {
            if (output != null) {
                OUTPUT.removeChild(output);
            }

            output = document.createElement("p");
            output.innerText = outputText;
            output.classList.add("output-fade-in");
            output.classList.add(successful ? "success" : "error");
            OUTPUT.appendChild(output);
        }

        function listener(element, oldEvent, newEvent, func) {
            if (element.addEventListener) {
                element.addEventListener(newEvent, func, false);
            } else if (element.attachEvent) {
                element.attachEvent(oldEvent, func);
            }
        }
    </script>
</body>

</html>